# Firebase App Hosting – production env (same APIs/storage as local).
# Create secrets in Google Cloud Console → Security → Secret Manager (same names as below).
# Deploy Firestore + Storage rules: firebase deploy --only firestore,storage
# See DEPLOYMENT.md for full steps.

runConfig:
  minInstances: 0

env:
  # --- Contact form (Resend, default sender only — no custom domain) ---
  - variable: RESEND_API_KEY
    secret: RESEND_API_KEY
    availability: [BUILD, RUNTIME]
  # Must be the email you used to sign up for Resend; default sender can only deliver to that address.
  - variable: CONTACT_FORM_TO_EMAIL
    value: "info@roofix.com.au"
    availability: [BUILD, RUNTIME]
  # Leave CONTACT_FORM_FROM_EMAIL unset to use Resend default (onboarding@resend.dev). Reply-To is set to the contact form submitter.

  # --- Google Places (address autocomplete) ---
  - variable: GOOGLE_PLACES_API_KEY
    secret: GOOGLE_PLACES_API_KEY
    availability: [BUILD, RUNTIME]

  # --- Firebase (server: Firestore read; client: auth, Firestore write, Storage) ---
  - variable: FIREBASE_PROJECT_ID
    value: "roofix-768a5"
    availability: [BUILD, RUNTIME]
  - variable: FIREBASE_SERVICE_ACCOUNT_KEY
    secret: FIREBASE_SERVICE_ACCOUNT_KEY
    availability: [RUNTIME]

  # Client config (must be available at BUILD for Next.js public env).
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: NEXT_PUBLIC_FIREBASE_API_KEY
    availability: [BUILD, RUNTIME]
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "roofix-768a5.firebaseapp.com"
    availability: [BUILD, RUNTIME]
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "roofix-768a5"
    availability: [BUILD, RUNTIME]
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "roofix-768a5.appspot.com"
    availability: [BUILD, RUNTIME]
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    availability: [BUILD, RUNTIME]
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: NEXT_PUBLIC_FIREBASE_APP_ID
    availability: [BUILD, RUNTIME]

  # Control centre only on admin subdomain (middleware uses this to rewrite / → /control-centre).
  - variable: NEXT_PUBLIC_ADMIN_HOST
    value: "admin.roofix.com.au"
    availability: [BUILD, RUNTIME]

  # --- Public site: GA4. Control-centre /analytics uses custom dashboard (GA4 Data API). ---
  - variable: NEXT_PUBLIC_GA4_ID
    value: "G-BXHK1W0M5L"
    availability: [BUILD, RUNTIME]
  # Numeric GA4 Property ID for /control-centre/analytics. GA4 Admin → Property settings. Service account must have Viewer access; enable Google Analytics Data API.
  - variable: GA4_PROPERTY_ID
    value: "490255441"
    availability: [RUNTIME]
